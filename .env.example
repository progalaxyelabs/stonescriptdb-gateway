# StoneScriptDB Gateway Configuration
# Copy this file to .env and update values as needed

# PostgreSQL connection (admin database for creating tenant databases)
# Option 1: Individual fields (recommended - handles special characters automatically)
DB_HOST=localhost
DB_PORT=5432
DB_NAME=postgres
DB_USER=gateway_user
DB_PASSWORD=password

# Option 2: Full URL (if set, overrides individual fields above)
# DATABASE_URL=postgres://gateway_user:password@localhost:5432/postgres

# Server settings
GATEWAY_HOST=127.0.0.1
GATEWAY_PORT=9000

# Connection pool settings
MAX_CONNECTIONS_PER_POOL=10     # Max connections per database pool
MAX_TOTAL_CONNECTIONS=200       # Max total connections across all pools
POOL_IDLE_TIMEOUT_SECS=1800     # Idle pool cleanup timeout (30 min)
POOL_MAX_LIFETIME_SECS=3600     # Max connection lifetime (1 hour)

# Security - IP allowlist (comma-separated CIDR blocks)
# Default: localhost and Azure VNet
ALLOWED_NETWORKS=127.0.0.0/8,::1/128,10.0.1.0/24

# Schema storage directory (v2 API)
# Stores registered platform schemas on disk
DATA_DIR=/opt/stonescriptdb-gateway/data

# Logging
LOG_DIR=/var/log/stonescriptdb-gateway
RUST_LOG=info,stonescriptdb_gateway=debug
